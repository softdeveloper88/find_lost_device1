package com.hura.find_lost_device1import android.content.BroadcastReceiverimport android.content.Contextimport android.content.Intentimport android.media.AudioManagerimport android.media.MediaPlayerimport android.os.BatteryManagerimport android.util.Logimport android.widget.Toastimport com.hura.find_lost_device1.Rimport io.flutter.plugins.firebase.messaging.ContextHolder.getApplicationContextclass BatteryBroadcastReceiver : BroadcastReceiver() {    override fun onReceive(context: Context?, intent: Intent) {        Log.d("check", "service")        checkBatteryLevel(intent, context!!)    }    private fun checkBatteryLevel(batteryChangeIntent: Intent, context: Context) {        // some calculations        val status: Int = batteryChangeIntent.getIntExtra(BatteryManager.EXTRA_STATUS, -1)        val isCharging: Boolean = status == BatteryManager.BATTERY_STATUS_CHARGING                || status == BatteryManager.BATTERY_STATUS_FULL        val mp = MediaPlayer.create(context, R.raw.ring) //Onreceive gives you context        if (isCharging) {            mp.pause()            Toast.makeText(context, "is charging true", Toast.LENGTH_SHORT).show()        } else {            val audioManager: AudioManager = getApplicationContext().getSystemService(Context.AUDIO_SERVICE) as AudioManager            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC),0);            audioManager.setStreamVolume(AudioManager.STREAM_RING,audioManager.getStreamMaxVolume(AudioManager.STREAM_RING),0);//            val mp = MediaPlayer.create(context, R.raw.ring) //Onreceive gives you context            if (mp.isPlaying) mp.seekTo(0);            else mp.start()            Toast.makeText(context, "is charging false", Toast.LENGTH_SHORT).show()        }        // do not forget to unregister    }}